
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<style type="text/css">
		body{direction:ltr}body,td,th{font-family:arial,sans-serif;font-size:83%}img{border:0}a:link{color:#00c}#blockedReason{margin:1em 30px;padding:1em;border:1px solid #333333;background-color:#ffffcc;color:#cc0000;font-size:100%}.PubNote{width:90%;margin:0px 0px 15px 30px;padding:5px 0px 0px 0px;border-top:1px solid #ccc;border-right:2px solid #bbb;border-bottom:2px solid #888;border-left:1px solid #bbb}.PubNoteAttributes{margin:0px 10px 5px 10px}.Labels{margin:10px 10px 5px 10px;color:#006633}.LabelHeader{color:#666666}.AttributeTitle{font-weight:bold;font-size:105%}.PubNoteContentArea{margin:5px 10px 5px 10px}.gn_bq{margin:2px 0;border-left:1px dotted #ccc;padding:0 5px}.gn_c{background-color:#e7eef2;padding:5px 10px 5px 15px;margin:5px -10px -5px -10px;border-top:1px solid #ccc;color:#444;font-size:90%}.PubSectionHeader{color:#ffffff;font-weight:bold;background-color:#7799bb;padding:2px 10px}#pubHeader{margin-bottom:20px}#pubHeaderMain{font-weight:bold;margin-bottom:10px}#pubHeaderSub{margin-bottom:10px;line-height:1.4em;color:#333}#notebookList{margin:0px 0px 10px 40px;line-height:1.4em}#SectionListHeader{font-weight:bold;margin-bottom:10px;background-color:#ddd;color:#000;padding:2px 10px}#disclaimer{margin:20px auto 30px 30px;color:#666}#pubContent{margin:20px auto 20px 30px;width:800px}#sectionList{line-height:1.2em;border-bottom:1px solid #ccc;padding-bottom:10px;margin-bottom:10px;border:1px solid #ddd}#sectionList ul{margin:0;padding:0;list-style:none}#sectionList li{margin:0px 10px 0px 20px!important;padding:0;font-size:100%!important;list-style:none;text-indent:-10px}
	</style>
<title>README</title></head>
<body bgcolor="#FFFFFF" onload="">
<table align="center" border="0" cellpadding="5" cellspacing="0" width="100%"><tbody><tr valign="middle"><td>
<br>
<div id="pubContent"><div id="pubHeader"><div id="pubHeaderSub"><H2>How-to Prepare an SD Card for Flashing a BeagleBoard</H2></div></div>
<a name="NDUm65goQhPf304gm"></a>
<div class="PubNote">
<div class="PubNoteContentArea"><div><font face="verdana, sans-serif">This explains how to prepare an SD Card that can automagically program NAND flash on your beagleboard.</font></div><div><font face="verdana, sans-serif"><br></font></div><div><font face="verdana, sans-serif">Thanks to Jason Kridner and Koen Kooi for help. I am documenting the steps here for mine and&nbsp;</font><span style="font-family:verdana, sans-serif">others'&nbsp;</span><span style="font-family:verdana, sans-serif">reference.</span></div><div><font face="verdana, sans-serif"><b><u><br></u></b></font></div><div><font face="verdana, sans-serif"><b><u>Git Repository Location</u></b></font></div><div><font face="verdana, sans-serif"><b><u><br></u></b></font></div><div><font face="verdana, sans-serif"><u><a href="https://gitorious.org/~joelf/beagleboard-validation/joelf-validation-scripts">https://gitorious.org/~joelf/beagleboard-validation/joelf-validation-scripts</a><br></u></font></div><div><font face="verdana, sans-serif"><br></font></div><div><span style="font-family:verdana, sans-serif"><b><u>Files from the above repo:</u></b></span><br></div><div><span style="font-family:verdana, sans-serif"><br></span></div><div><span style="font-family:verdana, sans-serif">uEnv.txt: Contains environment variables for commands to do flashing</span><br></div><div><font face="verdana, sans-serif">flash-nand-fs.sh: Flashes the FS image from linux userspace.</font></div><div><font face="verdana, sans-serif">README.</font></div><div><font face="verdana, sans-serif"><br></font></div><div><span style="font-family:verdana, sans-serif"><b><u>How-to prepare SDCard for flashing</u></b></span><br></div><div><font face="verdana, sans-serif"><br></font></div><div><span style="font-family:verdana, sans-serif"><b>Step 1: Use Narcissus to build a tar.gz of the root filesystem:</b></span><br></div><div><font face="verdana, sans-serif">1. Visit <a href="http://narcissus.angstrom-distribution.org/">http://narcissus.angstrom-distribution.org/</a></font></div><div><font face="verdana, sans-serif">2. Select Machine as "beaglboard" and a suitable name.</font></div><div><font face="verdana, sans-serif">3. Select the option complexity as "Advanced"</font></div><div><font face="verdana, sans-serif">4. In the "Select the release you want to base your rootfs image on" dropdown, select "2011.03"</font></div><div><font face="verdana, sans-serif">5. Select the type of image "tar.gz"</font></div><div><font face="verdana, sans-serif">6. Head to the bottom of the page and under "Additional packages selection", select the checkbox for&nbsp;</font></div><div><font face="verdana, sans-serif">&nbsp;&nbsp; "Beagleboard validation GNOME image" and click on "Build me!".</font></div><div><font face="verdana, sans-serif"><br></font></div><div><font face="verdana, sans-serif">Wait for a few minutes for your tar.gz image to be prepared and then download it on your local machine.</font></div><div><font face="verdana, sans-serif"><br></font></div><div><font face="verdana, sans-serif"><b>Step 2: Prepare SD Card</b></font></div><div><span style="font-family:verdana, sans-serif">Make sure your SD Card is setup by following instructions <a href="http://elinux.org/BeagleBoardBeginners#SD_card_setup">here</a>&nbsp;. Also make sure the FAT partition has</span></div><div><span style="font-family:verdana, sans-serif">MLO and U-boot. These can also be obtained from the /boot directory in .tar.gz .</span></div><div><span style="font-family:verdana, sans-serif"><br></span></div><div><font face="verdana, sans-serif">1. Insert the SD Card, cd into the mounted directory and run</font><span style="font-family:verdana, sans-serif">&nbsp;tar -zxvf &lt;image-name&gt;.tar.gz</span></div><div><span style="font-family:verdana, sans-serif">2. Copy flash-nand-fs.sh (same location as this README) script to /etc/init.d/</span><br></div><div><font face="verdana, sans-serif">&nbsp;&nbsp; &nbsp;Copy the tar.gz image to /boot</font></div><div><font face="verdana, sans-serif">&nbsp;&nbsp; &nbsp;Edit /etc/init.d/flash-nand-fs.sh with the correct path to the tar.gz in /boot</font></div><div><span style="font-family:verdana, sans-serif">3. Unmount the SD Card, eject it, insert into your BeagleBoard and give power.</span><br></div><div><font face="verdana, sans-serif">4. Once linux boots, run the commands:</font></div><div><font face="verdana, sans-serif">&nbsp;&nbsp; &nbsp;update-rc.d flash-nand-fs.sh</font></div><div><font face="verdana, sans-serif">&nbsp;&nbsp; &nbsp;cd /etc/</font></div><div><font face="verdana, sans-serif">&nbsp;&nbsp; &nbsp;find . -name K\*flash-nand-fs\* | xargs rm</font></div><div><font face="verdana, sans-serif">5. Power off the board.</font></div><div><font face="verdana, sans-serif">6. Remove the SD Card and insert it into your machine's card reader, let it mount.</font></div><div><font face="verdana, sans-serif">7. Copy uEnv.txt into the FAT partition, unmount and eject the card.</font></div><div><font face="verdana, sans-serif"><br></font></div><div><font face="verdana, sans-serif"><b>Step 3: Program the Flash</b></font></div><div><font face="verdana, sans-serif">1. Insert the prepared SD Card and power up the board.</font></div><div><font face="verdana, sans-serif">2. Allow the flashing to take</font><span style="font-family:verdana, sans-serif">&nbsp;place. Donot reset until you see a message that says "Done, press any key to poweroff"</span></div><div><font face="verdana, sans-serif">3. Hit enter and allow the board to power off. Remove the SD Card, and reset the board.</font></div><div><font face="verdana, sans-serif">4. It should boot MLO, U-boot and Linux from NAND.</font></div><div><font face="verdana, sans-serif"><br></font></div></div>
</div></div></body>
</html>
